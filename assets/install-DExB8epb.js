import{_ as k,c as ne,x as ie,S as se,c1 as pe,P as oe,c2 as Z,y as me,k as Ae,c3 as ye,F as V,H as O,I as be,c4 as Se,A as j,G as _e,c5 as xe,a3 as we,g as z,C as De,c6 as he,z as le,a7 as ce,E as ue,M as Ie,L as Pe,c7 as Le,c8 as Ce,K as Me,J as Oe,c9 as ke,ca as Te,T as Re,cb as Ee,cc as Ve,cd as Ne}from"./charts-DUcQ0VhJ.js";import{g as Be}from"./sectorHelper-BsHLyZ1Y.js";var X=function(n){k(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(e,r){return ne(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(e,r,a){var i=this.coordinateSystem;if(i&&i.clampData){var s=i.clampData(e),o=i.dataToPoint(s);if(a)ie(i.getAxes(),function(g,d){if(g.type==="category"&&r!=null){var v=g.getTicksCoords(),m=s[d],b=r[d]==="x1"||r[d]==="y1";if(b&&(m+=1),v.length<2)return;if(v.length===2){o[d]=g.toGlobalCoord(g.getExtent()[b?1:0]);return}for(var A=void 0,f=void 0,S=1,y=0;y<v.length;y++){var x=v[y].coord,_=y===v.length-1?v[y-1].tickValue+S:v[y].tickValue;if(_===m){f=x;break}else if(_<m)A=x;else if(A!=null&&_>m){f=(x+A)/2;break}y===1&&(S=_-v[0].tickValue)}f==null&&(A?A&&(f=v[v.length-1].coord):f=v[0].coord),o[d]=g.toGlobalCoord(f)}});else{var h=this.getData(),c=h.getLayout("offset"),l=h.getLayout("size"),u=i.getBaseAxis().isHorizontal()?0:1;o[u]+=c+l/2}return o}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(se);se.registerClass(X);var Ge=function(n){k(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(){return ne(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),r=this.get("largeThreshold");return r>e&&(e=r),e},t.prototype.brushSelector=function(e,r,a){return a.rect(r.getItemLayout(e))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=pe(X.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(X),We=function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n}(),H=function(n){k(t,n);function t(e){var r=n.call(this,e)||this;return r.type="sausage",r}return t.prototype.getDefaultShape=function(){return new We},t.prototype.buildPath=function(e,r){var a=r.cx,i=r.cy,s=Math.max(r.r0||0,0),o=Math.max(r.r,0),h=(o-s)*.5,c=s+h,l=r.startAngle,u=r.endAngle,g=r.clockwise,d=Math.PI*2,v=g?u-l<d:l-u<d;v||(l=u-(g?d:-d));var m=Math.cos(l),b=Math.sin(l),A=Math.cos(u),f=Math.sin(u);v?(e.moveTo(m*s+a,b*s+i),e.arc(m*c+a,b*c+i,h,-Math.PI+l,l,!g)):e.moveTo(m*o+a,b*o+i),e.arc(a,i,o,l,u,!g),e.arc(A*c+a,f*c+i,h,u-Math.PI*2,u-Math.PI,!g),s!==0&&e.arc(a,i,s,u,l,g)},t}(oe);function Fe(n,t){t=t||{};var e=t.isRoundCap;return function(r,a,i){var s=a.position;if(!s||s instanceof Array)return Z(r,a,i);var o=n(s),h=a.distance!=null?a.distance:5,c=this.shape,l=c.cx,u=c.cy,g=c.r,d=c.r0,v=(g+d)/2,m=c.startAngle,b=c.endAngle,A=(m+b)/2,f=e?Math.abs(g-d)/2:0,S=Math.cos,y=Math.sin,x=l+g*S(m),_=u+g*y(m),P="left",L="top";switch(o){case"startArc":x=l+(d-h)*S(A),_=u+(d-h)*y(A),P="center",L="top";break;case"insideStartArc":x=l+(d+h)*S(A),_=u+(d+h)*y(A),P="center",L="bottom";break;case"startAngle":x=l+v*S(m)+T(m,h+f,!1),_=u+v*y(m)+R(m,h+f,!1),P="right",L="middle";break;case"insideStartAngle":x=l+v*S(m)+T(m,-h+f,!1),_=u+v*y(m)+R(m,-h+f,!1),P="left",L="middle";break;case"middle":x=l+v*S(A),_=u+v*y(A),P="center",L="middle";break;case"endArc":x=l+(g+h)*S(A),_=u+(g+h)*y(A),P="center",L="bottom";break;case"insideEndArc":x=l+(g-h)*S(A),_=u+(g-h)*y(A),P="center",L="top";break;case"endAngle":x=l+v*S(b)+T(b,h+f,!0),_=u+v*y(b)+R(b,h+f,!0),P="left",L="middle";break;case"insideEndAngle":x=l+v*S(b)+T(b,-h+f,!0),_=u+v*y(b)+R(b,-h+f,!0),P="right",L="middle";break;default:return Z(r,a,i)}return r=r||{},r.x=x,r.y=_,r.align=P,r.verticalAlign=L,r}}function Ye(n,t,e,r){if(me(r)){n.setTextConfig({rotation:r});return}else if(Ae(t)){n.setTextConfig({rotation:0});return}var a=n.shape,i=a.clockwise?a.startAngle:a.endAngle,s=a.clockwise?a.endAngle:a.startAngle,o=(i+s)/2,h,c=e(t);switch(c){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":h=o;break;case"startAngle":case"insideStartAngle":h=i;break;case"endAngle":case"insideEndAngle":h=s;break;default:n.setTextConfig({rotation:0});return}var l=Math.PI*1.5-h;c==="middle"&&l>Math.PI/2&&l<Math.PI*1.5&&(l-=Math.PI),n.setTextConfig({rotation:l})}function T(n,t,e){return t*Math.sin(n)*(e?-1:1)}function R(n,t,e){return t*Math.cos(n)*(e?1:-1)}var F=Math.max,Y=Math.min;function Xe(n,t){var e=n.getArea&&n.getArea();if(he(n,"cartesian2d")){var r=n.getBaseAxis();if(r.type!=="category"||!r.onBand){var a=t.getLayout("bandWidth");r.isHorizontal()?(e.x-=a,e.width+=a*2):(e.y-=a,e.height+=a*2)}}return e}var ze=function(n){k(t,n);function t(){var e=n.call(this)||this;return e.type=t.type,e._isFirstFrame=!0,e}return t.prototype.render=function(e,r,a,i){this._model=e,this._removeOnRenderedListener(a),this._updateDrawMode(e);var s=e.get("coordinateSystem");(s==="cartesian2d"||s==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,r,a):this._renderNormal(e,r,a,i))},t.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},t.prototype.incrementalRender=function(e,r){this._progressiveEls=[],this._incrementalRenderLarge(e,r)},t.prototype.eachRendered=function(e){ye(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var r=e.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},t.prototype._renderNormal=function(e,r,a,i){var s=this.group,o=e.getData(),h=this._data,c=e.coordinateSystem,l=c.getBaseAxis(),u;c.type==="cartesian2d"?u=l.isHorizontal():c.type==="polar"&&(u=l.dim==="angle");var g=e.isAnimationEnabled()?e:null,d=Ue(e,c);d&&this._enableRealtimeSort(d,o,a);var v=e.get("clip",!0)||d,m=Xe(c,o);s.removeClipPath();var b=e.get("roundCap",!0),A=e.get("showBackground",!0),f=e.getModel("backgroundStyle"),S=f.get("borderRadius")||0,y=[],x=this._backgroundEls,_=i&&i.isInitSort,P=i&&i.type==="changeAxisOrder";function L(p){var C=E[c.type](o,p),w=Qe(c,u,C);return w.useStyle(f.getItemStyle()),c.type==="cartesian2d"?w.setShape("r",S):w.setShape("cornerRadius",S),y[p]=w,w}o.diff(h).add(function(p){var C=o.getItemModel(p),w=E[c.type](o,p,C);if(A&&L(p),!(!o.hasValue(p)||!$[c.type](w))){var M=!1;v&&(M=q[c.type](m,w));var D=J[c.type](e,o,p,w,u,g,l.model,!1,b);d&&(D.forceLabelAnimation=!0),ee(D,o,p,C,w,e,u,c.type==="polar"),_?D.attr({shape:w}):d?K(d,g,D,w,p,u,!1,!1):V(D,{shape:w},e,p),o.setItemGraphicEl(p,D),s.add(D),D.ignore=M}}).update(function(p,C){var w=o.getItemModel(p),M=E[c.type](o,p,w);if(A){var D=void 0;x.length===0?D=L(C):(D=x[C],D.useStyle(f.getItemStyle()),c.type==="cartesian2d"?D.setShape("r",S):D.setShape("cornerRadius",S),y[p]=D);var ve=E[c.type](o,p),fe=de(u,ve,c);O(D,{shape:fe},g,p)}var I=h.getItemGraphicEl(C);if(!o.hasValue(p)||!$[c.type](M)){s.remove(I);return}var G=!1;if(v&&(G=q[c.type](m,M),G&&s.remove(I)),I?be(I):I=J[c.type](e,o,p,M,u,g,l.model,!!I,b),d&&(I.forceLabelAnimation=!0),P){var U=I.getTextContent();if(U){var W=Se(U);W.prevValue!=null&&(W.prevValue=W.value)}}else ee(I,o,p,w,M,e,u,c.type==="polar");_?I.attr({shape:M}):d?K(d,g,I,M,p,u,!0,P):O(I,{shape:M},e,p,null),o.setItemGraphicEl(p,I),I.ignore=G,s.add(I)}).remove(function(p){var C=h.getItemGraphicEl(p);C&&j(C,e,p)}).execute();var N=this._backgroundGroup||(this._backgroundGroup=new _e);N.removeAll();for(var B=0;B<y.length;++B)N.add(y[B]);s.add(N),this._backgroundEls=y,this._data=o},t.prototype._renderLarge=function(e,r,a){this._clear(),re(e,this.group),this._updateLargeClip(e)},t.prototype._incrementalRenderLarge=function(e,r){this._removeBackground(),re(r,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(e){var r=e.get("clip",!0)&&xe(e.coordinateSystem,!1,e),a=this.group;r?a.setClipPath(r):a.removeClipPath()},t.prototype._enableRealtimeSort=function(e,r,a){var i=this;if(r.count()){var s=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(r,e,a),this._isFirstFrame=!1;else{var o=function(h){var c=r.getItemGraphicEl(h),l=c&&c.shape;return l&&Math.abs(s.isHorizontal()?l.height:l.width)||0};this._onRendered=function(){i._updateSortWithinSameData(r,o,s,a)},a.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(e,r,a){var i=[];return e.each(e.mapDimension(r.dim),function(s,o){var h=a(o);h=h??NaN,i.push({dataIndex:o,mappedValue:h,ordinalNumber:s})}),i.sort(function(s,o){return o.mappedValue-s.mappedValue}),{ordinalNumbers:we(i,function(s){return s.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(e,r,a){for(var i=a.scale,s=e.mapDimension(a.dim),o=Number.MAX_VALUE,h=0,c=i.getOrdinalMeta().categories.length;h<c;++h){var l=e.rawIndexOf(s,i.getRawOrdinalNumber(h)),u=l<0?Number.MIN_VALUE:r(e.indexOfRawIndex(l));if(u>o)return!0;o=u}return!1},t.prototype._isOrderDifferentInView=function(e,r){for(var a=r.scale,i=a.getExtent(),s=Math.max(0,i[0]),o=Math.min(i[1],a.getOrdinalMeta().categories.length-1);s<=o;++s)if(e.ordinalNumbers[s]!==a.getRawOrdinalNumber(s))return!0},t.prototype._updateSortWithinSameData=function(e,r,a,i){if(this._isOrderChangedWithinSameData(e,r,a)){var s=this._dataSort(e,a,r);this._isOrderDifferentInView(s,a)&&(this._removeOnRenderedListener(i),i.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",axisId:a.index,sortInfo:s}))}},t.prototype._dispatchInitSort=function(e,r,a){var i=r.baseAxis,s=this._dataSort(e,i,function(o){return e.get(e.mapDimension(r.otherAxis.dim),o)});a.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",isInitSort:!0,axisId:i.index,sortInfo:s})},t.prototype.remove=function(e,r){this._clear(this._model),this._removeOnRenderedListener(r)},t.prototype.dispose=function(e,r){this._removeOnRenderedListener(r)},t.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(e){var r=this.group,a=this._data;e&&e.isAnimationEnabled()&&a&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],a.eachItemGraphicEl(function(i){j(i,e,z(i).dataIndex)})):r.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(De),q={cartesian2d:function(n,t){var e=t.width<0?-1:1,r=t.height<0?-1:1;e<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height);var a=n.x+n.width,i=n.y+n.height,s=F(t.x,n.x),o=Y(t.x+t.width,a),h=F(t.y,n.y),c=Y(t.y+t.height,i),l=o<s,u=c<h;return t.x=l&&s>a?o:s,t.y=u&&h>i?c:h,t.width=l?0:o-s,t.height=u?0:c-h,e<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height),l||u},polar:function(n,t){var e=t.r0<=t.r?1:-1;if(e<0){var r=t.r;t.r=t.r0,t.r0=r}var a=Y(t.r,n.r),i=F(t.r0,n.r0);t.r=a,t.r0=i;var s=a-i<0;if(e<0){var r=t.r;t.r=t.r0,t.r0=r}return s}},J={cartesian2d:function(n,t,e,r,a,i,s,o,h){var c=new ce({shape:ue({},r),z2:1});if(c.__dataIndex=e,c.name="item",i){var l=c.shape,u=a?"height":"width";l[u]=0}return c},polar:function(n,t,e,r,a,i,s,o,h){var c=!a&&h?H:le,l=new c({shape:r,z2:1});l.name="item";var u=ge(a);if(l.calculateTextPosition=Fe(u,{isRoundCap:c===H}),i){var g=l.shape,d=a?"r":"endAngle",v={};g[d]=a?r.r0:r.startAngle,v[d]=r[d],(o?O:V)(l,{shape:v},i)}return l}};function Ue(n,t){var e=n.get("realtimeSort",!0),r=t.getBaseAxis();if(e&&r.type==="category"&&t.type==="cartesian2d")return{baseAxis:r,otherAxis:t.getOtherAxis(r)}}function K(n,t,e,r,a,i,s,o){var h,c;i?(c={x:r.x,width:r.width},h={y:r.y,height:r.height}):(c={y:r.y,height:r.height},h={x:r.x,width:r.width}),o||(s?O:V)(e,{shape:h},t,a,null);var l=t?n.baseAxis.model:null;(s?O:V)(e,{shape:c},l,a)}function Q(n,t){for(var e=0;e<t.length;e++)if(!isFinite(n[t[e]]))return!0;return!1}var Ze=["x","y","width","height"],je=["cx","cy","r","startAngle","endAngle"],$={cartesian2d:function(n){return!Q(n,Ze)},polar:function(n){return!Q(n,je)}},E={cartesian2d:function(n,t,e){var r=n.getItemLayout(t),a=e?qe(e,r):0,i=r.width>0?1:-1,s=r.height>0?1:-1;return{x:r.x+i*a/2,y:r.y+s*a/2,width:r.width-i*a,height:r.height-s*a}},polar:function(n,t,e){var r=n.getItemLayout(t);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function He(n){return n.startAngle!=null&&n.endAngle!=null&&n.startAngle===n.endAngle}function ge(n){return function(t){var e=t?"Arc":"Angle";return function(r){switch(r){case"start":case"insideStart":case"end":case"insideEnd":return r+e;default:return r}}}(n)}function ee(n,t,e,r,a,i,s,o){var h=t.getItemVisual(e,"style");if(o){if(!i.get("roundCap")){var l=n.shape,u=Be(r.getModel("itemStyle"),l,!0);ue(l,u),n.setShape(l)}}else{var c=r.get(["itemStyle","borderRadius"])||0;n.setShape("r",c)}n.useStyle(h);var g=r.getShallow("cursor");g&&n.attr("cursor",g);var d=o?s?a.r>=a.r0?"endArc":"startArc":a.endAngle>=a.startAngle?"endAngle":"startAngle":s?a.height>=0?"bottom":"top":a.width>=0?"right":"left",v=Ie(r);Pe(n,v,{labelFetcher:i,labelDataIndex:e,defaultText:Le(i.getData(),e),inheritColor:h.fill,defaultOpacity:h.opacity,defaultOutsidePosition:d});var m=n.getTextContent();if(o&&m){var b=r.get(["label","position"]);n.textConfig.inside=b==="middle"?!0:null,Ye(n,b==="outside"?d:b,ge(s),r.get(["label","rotate"]))}Ce(m,v,i.getRawValue(e),function(f){return Te(t,f)});var A=r.getModel(["emphasis"]);Me(n,A.get("focus"),A.get("blurScope"),A.get("disabled")),Oe(n,r),He(a)&&(n.style.fill="none",n.style.stroke="none",ie(n.states,function(f){f.style&&(f.style.fill=f.style.stroke="none")}))}function qe(n,t){var e=n.get(["itemStyle","borderColor"]);if(!e||e==="none")return 0;var r=n.get(["itemStyle","borderWidth"])||0,a=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),i=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(r,a,i)}var Je=function(){function n(){}return n}(),te=function(n){k(t,n);function t(e){var r=n.call(this,e)||this;return r.type="largeBar",r}return t.prototype.getDefaultShape=function(){return new Je},t.prototype.buildPath=function(e,r){for(var a=r.points,i=this.baseDimIdx,s=1-this.baseDimIdx,o=[],h=[],c=this.barWidth,l=0;l<a.length;l+=3)h[i]=c,h[s]=a[l+2],o[i]=a[l+i],o[s]=a[l+s],e.rect(o[0],o[1],h[0],h[1])},t}(oe);function re(n,t,e,r){var a=n.getData(),i=a.getLayout("valueAxisHorizontal")?1:0,s=a.getLayout("largeDataIndices"),o=a.getLayout("size"),h=n.getModel("backgroundStyle"),c=a.getLayout("largeBackgroundPoints");if(c){var l=new te({shape:{points:c},incremental:!!r,silent:!0,z2:0});l.baseDimIdx=i,l.largeDataIndices=s,l.barWidth=o,l.useStyle(h.getItemStyle()),t.add(l),e&&e.push(l)}var u=new te({shape:{points:a.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});u.baseDimIdx=i,u.largeDataIndices=s,u.barWidth=o,t.add(u),u.useStyle(a.getVisual("style")),z(u).seriesIndex=n.seriesIndex,n.get("silent")||(u.on("mousedown",ae),u.on("mousemove",ae)),e&&e.push(u)}var ae=ke(function(n){var t=this,e=Ke(t,n.offsetX,n.offsetY);z(t).dataIndex=e>=0?e:null},30,!1);function Ke(n,t,e){for(var r=n.baseDimIdx,a=1-r,i=n.shape.points,s=n.largeDataIndices,o=[],h=[],c=n.barWidth,l=0,u=i.length/3;l<u;l++){var g=l*3;if(h[r]=c,h[a]=i[g+2],o[r]=i[g+r],o[a]=i[g+a],h[a]<0&&(o[a]+=h[a],h[a]=-h[a]),t>=o[0]&&t<=o[0]+h[0]&&e>=o[1]&&e<=o[1]+h[1])return s[l]}return-1}function de(n,t,e){if(he(e,"cartesian2d")){var r=t,a=e.getArea();return{x:n?r.x:a.x,y:n?a.y:r.y,width:n?r.width:a.width,height:n?a.height:r.height}}else{var a=e.getArea(),i=t;return{cx:a.cx,cy:a.cy,r0:n?a.r0:i.r0,r:n?a.r:i.r,startAngle:n?i.startAngle:0,endAngle:n?i.endAngle:Math.PI*2}}}function Qe(n,t,e){var r=n.type==="polar"?le:ce;return new r({shape:de(t,e,n),silent:!0,z2:0})}function tt(n){n.registerChartView(ze),n.registerSeriesModel(Ge),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,Re(Ee,"bar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Ve("bar")),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,Ne("bar")),n.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,e){var r=t.componentType||"series";e.eachComponent({mainType:r,query:t},function(a){t.sortInfo&&a.axis.setCategorySortInfo(t.sortInfo)})})}export{tt as i};
