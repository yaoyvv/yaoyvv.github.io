import{a as F}from"./list-C1GqivMZ.js";import{P as j}from"./index-FsViuC7j.js";import{d as q,r as n,j as E,k as K,q as s,c as d,o as i,b as v,a as l,K as b,p,v as Q,t as W,u as x,f as y,e as z,W as G,F as V,s as H,Q as J,g as O}from"./index-DfAD_XQf.js";import{_ as R}from"./DialogForm.vue_vue_type_script_setup_true_lang-BjREzRM-.js";const X={class:"list-card-operation"},Y={class:"search-input"},Z={class:"list-card-items"},ee={class:"list-card-pagination"},ae={key:1,class:"list-card-loading"},te=q({name:"ListCard",__name:"index",setup(oe){const C={name:"",status:"",description:"",type:"0",mark:"",amount:0},a=n({current:1,pageSize:12,total:0}),u=n(void 0),m=n([]),g=n(!0),k=async()=>{try{const{list:e}=await F();m.value=e,a.value={...a.value,total:e.length}}catch(e){console.log(e)}finally{g.value=!1}},S=E(()=>u.value?`确认删除后${u.value.name}的所有产品信息将被清空, 且无法恢复`:"");K(()=>{k()});const r=n(!1),_=n(""),c=n(!1),f=n({...C}),h=e=>{a.value.pageSize=e,a.value.current=1},D=e=>{a.value.current=e},P=e=>{c.value=!0,u.value=e},I=()=>{const{index:e}=u.value;m.value.splice(e-1,1),c.value=!1,J.success("删除成功")},L=()=>{u.value=void 0,f.value={...C}},B=e=>{r.value=!0,f.value={name:e.name,status:e!=null&&e.isSetup?"1":"0",description:e.description,type:e.type.toString(),mark:"",amount:0}};return(e,o)=>{const N=s("t-button"),U=s("t-input"),w=s("t-col"),M=s("t-row"),A=s("t-pagination"),T=s("t-loading"),$=s("t-dialog");return i(),d("div",null,[v("div",X,[l(N,{onClick:o[0]||(o[0]=t=>r.value=!0)},{default:p(()=>[Q(W(x(y)("pages.listCard.create")),1)]),_:1}),v("div",Y,[l(U,{modelValue:_.value,"onUpdate:modelValue":o[1]||(o[1]=t=>_.value=t),placeholder:x(y)("pages.listCard.placeholder"),clearable:""},{"suffix-icon":p(()=>[_.value===""?(i(),z(x(G),{key:0,size:"var(--td-comp-size-xxxs)"})):b("",!0)]),_:1},8,["modelValue","placeholder"])])]),l(R,{visible:r.value,"onUpdate:visible":o[2]||(o[2]=t=>r.value=t),data:f.value},null,8,["visible","data"]),a.value.total>0&&!g.value?(i(),d(V,{key:0},[v("div",Z,[l(M,{gutter:[16,16]},{default:p(()=>[(i(!0),d(V,null,H(m.value.slice(a.value.pageSize*(a.value.current-1),a.value.pageSize*a.value.current),t=>(i(),z(w,{key:t.index,lg:4,xs:6,xl:3},{default:p(()=>[l(j,{class:"list-card-item",product:t,onDeleteItem:P,onManageProduct:B},null,8,["product"])]),_:2},1024))),128))]),_:1})]),v("div",ee,[l(A,{modelValue:a.value.current,"onUpdate:modelValue":o[3]||(o[3]=t=>a.value.current=t),"page-size":a.value.pageSize,"onUpdate:pageSize":o[4]||(o[4]=t=>a.value.pageSize=t),total:a.value.total,"page-size-options":[12,24,36],onPageSizeChange:h,onCurrentChange:D},null,8,["modelValue","page-size","total"])])],64)):g.value?(i(),d("div",ae,[l(T,{size:"large",text:"加载数据中..."})])):b("",!0),l($,{visible:c.value,"onUpdate:visible":o[5]||(o[5]=t=>c.value=t),header:"确认删除所选产品？",body:S.value,"on-cancel":L,onConfirm:I},null,8,["visible","body"])])}}}),ue=O(te,[["__scopeId","data-v-2a91f589"]]);export{ue as default};
