import{f as p,h as q,d as X,i as ee,j as B,k as te,n as ae,l as re,w as A,m as oe,c as I,a as g,p as m,u as v,q as S,F as R,s as V,b as D,v as W,t as P,o as w,e as O,x as ie,y as se,g as ne}from"./index-DfAD_XQf.js";import{P as le}from"./index-FsViuC7j.js";import{T as de}from"./index-Dvk21AXA.js";import{L as $}from"./date-CDlwbSft.js";import{_ as z,c as pe,S as ce,G as he,B as ue,P as ge,a as fe,g as me,p as G,b as ye,C as ve,u as Z,d as _e,e as d,f as H,i as be,h as Se,j as F}from"./charts-DUcQ0VhJ.js";import{i as De,a as we,b as xe,c as Ce}from"./install-DUd5eJ1X.js";var Le=function(s){z(t,s);function t(){var e=s!==null&&s.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.getInitialData=function(e,a){return pe(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var e=this.option.progressive;return e??(this.option.large?5e3:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return e??(this.option.large?1e4:this.get("progressiveThreshold"))},t.prototype.brushSelector=function(e,a,r){return r.point(a.getItemLayout(e))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(ce),K=4,Te=function(){function s(){}return s}(),Ae=function(s){z(t,s);function t(e){var a=s.call(this,e)||this;return a._off=0,a.hoverDataIdx=-1,a}return t.prototype.getDefaultShape=function(){return new Te},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(e,a){var r=a.points,o=a.size,i=this.symbolProxy,n=i.shape,c=e.getContext?e.getContext():e,l=c&&o[0]<K,u=this.softClipShape,h;if(l){this._ctx=c;return}for(this._ctx=null,h=this._off;h<r.length;){var f=r[h++],_=r[h++];isNaN(f)||isNaN(_)||u&&!u.contain(f,_)||(n.x=f-o[0]/2,n.y=_-o[1]/2,n.width=o[0],n.height=o[1],i.buildPath(e,n,!0))}this.incremental&&(this._off=h,this.notClear=!0)},t.prototype.afterBrush=function(){var e=this.shape,a=e.points,r=e.size,o=this._ctx,i=this.softClipShape,n;if(o){for(n=this._off;n<a.length;){var c=a[n++],l=a[n++];isNaN(c)||isNaN(l)||i&&!i.contain(c,l)||o.fillRect(c-r[0]/2,l-r[1]/2,r[0],r[1])}this.incremental&&(this._off=n,this.notClear=!0)}},t.prototype.findDataIndex=function(e,a){for(var r=this.shape,o=r.points,i=r.size,n=Math.max(i[0],4),c=Math.max(i[1],4),l=o.length/2-1;l>=0;l--){var u=l*2,h=o[u]-n/2,f=o[u+1]-c/2;if(e>=h&&a>=f&&e<=h+n&&a<=f+c)return l}return-1},t.prototype.contain=function(e,a){var r=this.transformCoordToLocal(e,a),o=this.getBoundingRect();if(e=r[0],a=r[1],o.contain(e,a)){var i=this.hoverDataIdx=this.findDataIndex(e,a);return i>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var a=this.shape,r=a.points,o=a.size,i=o[0],n=o[1],c=1/0,l=1/0,u=-1/0,h=-1/0,f=0;f<r.length;){var _=r[f++],x=r[f++];c=Math.min(_,c),u=Math.max(_,u),l=Math.min(x,l),h=Math.max(x,h)}e=this._rect=new ue(c-i/2,l-n/2,u-c+i,h-l+n)}return e},t}(ge),Ie=function(){function s(){this.group=new he}return s.prototype.updateData=function(t,e){this._clear();var a=this._create();a.setShape({points:t.getLayout("points")}),this._setCommon(a,t,e)},s.prototype.updateLayout=function(t){var e=t.getLayout("points");this.group.eachChild(function(a){if(a.startIndex!=null){var r=(a.endIndex-a.startIndex)*2,o=a.startIndex*4*2;e=new Float32Array(e.buffer,o,r)}a.setShape("points",e),a.reset()})},s.prototype.incrementalPrepareUpdate=function(t){this._clear()},s.prototype.incrementalUpdate=function(t,e,a){var r=this._newAdded[0],o=e.getLayout("points"),i=r&&r.shape.points;if(i&&i.length<2e4){var n=i.length,c=new Float32Array(n+o.length);c.set(i),c.set(o,n),r.endIndex=t.end,r.setShape({points:c})}else{this._newAdded=[];var l=this._create();l.startIndex=t.start,l.endIndex=t.end,l.incremental=!0,l.setShape({points:o}),this._setCommon(l,e,a)}},s.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},s.prototype._create=function(){var t=new Ae({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},s.prototype._setCommon=function(t,e,a){var r=e.hostModel;a=a||{};var o=e.getVisual("symbolSize");t.setShape("size",o instanceof Array?o:[o,o]),t.softClipShape=a.clipShape||null,t.symbolProxy=fe(e.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var i=t.shape.size[0]<K;t.useStyle(r.getModel("itemStyle").getItemStyle(i?["color","shadowBlur","shadowColor"]:["color"]));var n=e.getVisual("style"),c=n&&n.fill;c&&t.setColor(c);var l=me(t);l.seriesIndex=r.seriesIndex,t.on("mousemove",function(u){l.dataIndex=null;var h=t.hoverDataIdx;h>=0&&(l.dataIndex=h+(t.startIndex||0))})},s.prototype.remove=function(){this._clear()},s.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},s}(),Pe=function(s){z(t,s);function t(){var e=s!==null&&s.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,r){var o=e.getData(),i=this._updateSymbolDraw(o,e);i.updateData(o,{clipShape:this._getClipShape(e)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(e,a,r){var o=e.getData(),i=this._updateSymbolDraw(o,e);i.incrementalPrepareUpdate(o),this._finished=!1},t.prototype.incrementalRender=function(e,a,r){this._symbolDraw.incrementalUpdate(e,a.getData(),{clipShape:this._getClipShape(a)}),this._finished=e.end===a.getData().count()},t.prototype.updateTransform=function(e,a,r){var o=e.getData();if(this.group.dirty(),!this._finished||o.count()>1e4)return{update:!0};var i=G("").reset(e,a,r);i.progress&&i.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout(o)},t.prototype.eachRendered=function(e){this._symbolDraw&&this._symbolDraw.eachRendered(e)},t.prototype._getClipShape=function(e){var a=e.coordinateSystem,r=a&&a.getArea&&a.getArea();return e.get("clip",!0)?r:null},t.prototype._updateSymbolDraw=function(e,a){var r=this._symbolDraw,o=a.pipelineContext,i=o.large;return(!r||i!==this._isLargeDraw)&&(r&&r.remove(),r=this._symbolDraw=i?new Ie:new ye,this._isLargeDraw=i,this.group.removeAll()),this.group.add(r.group),r},t.prototype.remove=function(e,a){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(ve);function ze(s){Z(De),s.registerSeriesModel(Le),s.registerChartView(Pe),s.registerLayout(G("scatter"))}const Me=[{title:p("pages.dashboardDetail.topPanel.paneList.totalRequest"),number:"1126",upTrend:"10%"},{title:p("pages.dashboardDetail.topPanel.paneList.suppliers"),number:"13",downTrend:"13%"},{title:p("pages.dashboardDetail.topPanel.paneList.productCategory"),number:"4",upTrend:"10%"},{title:p("pages.dashboardDetail.topPanel.paneList.applicant"),number:90,downTrend:"44%",leftType:"icon-file-paste"},{title:p("pages.dashboardDetail.topPanel.paneList.completionRate"),number:80.5,upTrend:"70%"},{title:p("pages.dashboardDetail.topPanel.paneList.arrivalRate"),number:78,upTrend:"16%"}],Ne=[{description:p("pages.dashboardDetail.sslDescription"),index:1,isSetup:!0,name:p("pages.dashboardDetail.ssl"),type:4},{description:p("pages.dashboardDetail.sslDescription"),index:1,isSetup:!0,name:p("pages.dashboardDetail.ssl"),type:4}];function U({dateTime:s=[],placeholderColor:t,borderColor:e}){const r=[],o=[],i=[];for(let n=0;n<40;n++){if(s.length>0){const c=(new Date(s[1]).getTime()-new Date(s[0]).getTime())/40,l=new Date(s[0]).getTime()+c*n;r.push(H(l).format("MM-DD"))}else r.push(H().subtract(40-n,"day").format("MM-DD"));o.push(d().toString()),i.push(d().toString())}return{color:q(),xAxis:{data:r,axisLabel:{color:t},splitLine:{show:!1},axisLine:{lineStyle:{color:e,width:1}}},yAxis:{type:"value",axisLabel:{color:t},nameTextStyle:{padding:[0,0,0,60]},axisTick:{show:!1,axisLine:{show:!1}},axisLine:{show:!1},splitLine:{lineStyle:{color:e}}},tooltip:{trigger:"item"},grid:{top:"5px",left:"25px",right:"5px",bottom:"60px"},legend:{left:"center",bottom:"0",orient:"horizontal",data:[p("pages.dashboardDetail.procurement.goods.massageMachine"),p("pages.dashboardDetail.procurement.goods.coffeeMachine")],itemHeight:8,itemWidth:8,textStyle:{fontSize:12,color:t}},series:[{name:p("pages.dashboardDetail.procurement.goods.massageMachine"),symbolSize:10,data:i.reverse(),type:"scatter"},{name:p("pages.dashboardDetail.procurement.goods.coffeeMachine"),symbolSize:10,data:o.concat(o.reverse()),type:"scatter"}]}}function j({dateTime:s=[],placeholderColor:t,borderColor:e}){let a=[];for(let r=1;r<7;r++)a.push(p(`pages.dashboardDetail.chart.week${r}`));return s.length>0&&(a=_e(s,7)),{color:q(),grid:{top:"5%",right:"10px",left:"30px",bottom:"60px"},legend:{left:"center",bottom:"0",orient:"horizontal",data:[p("pages.dashboardDetail.procurement.goods.cup"),p("pages.dashboardDetail.procurement.goods.tea"),p("pages.dashboardDetail.procurement.goods.honey"),p("pages.dashboardDetail.procurement.goods.flour")],textStyle:{fontSize:12,color:t}},xAxis:{type:"category",data:a,boundaryGap:!1,axisLabel:{color:t},axisLine:{lineStyle:{color:e,width:1}}},yAxis:{type:"value",axisLabel:{color:t},splitLine:{lineStyle:{color:e}}},tooltip:{trigger:"item"},series:[{showSymbol:!0,symbol:"circle",symbolSize:8,name:p("pages.dashboardDetail.procurement.goods.cup"),stack:"总量",data:[d(),d(),d(),d(),d(),d(),d()],type:"line",itemStyle:{borderColor:e,borderWidth:1}},{showSymbol:!0,symbol:"circle",symbolSize:8,name:p("pages.dashboardDetail.procurement.goods.tea"),stack:"总量",data:[d(),d(),d(),d(),d(),d(),d()],type:"line",itemStyle:{borderColor:e,borderWidth:1}},{showSymbol:!0,symbol:"circle",symbolSize:8,name:p("pages.dashboardDetail.procurement.goods.honey"),stack:"总量",data:[d(),d(),d(),d(),d(),d(),d()],type:"line",itemStyle:{borderColor:e,borderWidth:1}},{showSymbol:!0,symbol:"circle",symbolSize:8,name:p("pages.dashboardDetail.procurement.goods.flour"),stack:"总量",data:[d(),d(),d(),d(),d(),d(),d()],type:"line",itemStyle:{borderColor:e,borderWidth:1}}]}}const ke={class:"dashboard-panel-detail"},Be={class:"dashboard-list-card__number"},Re={class:"dashboard-list-card__text"},Ve={class:"dashboard-list-card__text-left"},We=X({name:"DashboardDetail",__name:"index",setup(s){Z([we,xe,Ce,be,ze,Se]);const t=ee(),e=B(()=>t.chartColors);let a,r;const o=()=>{a=document.getElementById("lineContainer"),r=F(a),r.setOption(j({...e.value}))};let i,n;const c=()=>{i=document.getElementById("scatterContainer"),n=F(i),n.setOption(U({...e.value}))},l=()=>{r==null||r.resize({width:a.clientWidth,height:a.clientHeight}),n==null||n.resize({width:i.clientWidth,height:i.clientHeight})},u=()=>{c(),o()};te(()=>{u(),ae(()=>{l()})});const{width:h,height:f}=re();A([h,f],()=>{l()}),oe(()=>{_(),x()});const _=A(()=>t.mode,()=>{u()}),x=A(()=>t.brandTheme,()=>{se([r,n])}),J=()=>{n.setOption(U({...e.value}))},Q=M=>{const b=B(()=>t.chartColors);r.setOption(j({dateTime:M,...b.value}))};return(M,b)=>{const Y=S("t-icon"),C=S("t-card"),T=S("t-col"),N=S("t-row"),k=S("t-date-range-picker"),E=S("t-button");return w(),I("div",ke,[g(C,{title:v(p)("pages.dashboardDetail.topPanel.title"),class:"dashboard-detail-card",bordered:!1},{default:m(()=>[g(N,{gutter:[16,16]},{default:m(()=>[(w(!0),I(R,null,V(v(Me),(y,L)=>(w(),O(T,{key:L,xs:6,xl:3},{default:m(()=>[g(C,{class:"dashboard-list-card",description:y.title},{default:m(()=>[D("div",Be,P(y.number),1),D("div",Re,[D("div",Ve,[W(P(v(p)("pages.dashboardDetail.topPanel.quarter"))+" ",1),g(de,{class:"icon",type:y.upTrend?"up":"down",describe:y.upTrend||y.downTrend},null,8,["type","describe"])]),g(Y,{name:"chevron-right"})])]),_:2},1032,["description"])]),_:2},1024))),128))]),_:1})]),_:1},8,["title"]),g(N,{gutter:[16,16],class:"row-margin"},{default:m(()=>[g(T,{xs:12,xl:9},{default:m(()=>[g(C,{class:"dashboard-detail-card",title:v(p)("pages.dashboardDetail.procurement.title"),bordered:!1},{actions:m(()=>[g(k,{class:"card-date-picker-container","default-value":v($),theme:"primary",mode:"date",style:{width:"248px"},onChange:b[0]||(b[0]=y=>Q(y))},null,8,["default-value"])]),default:m(()=>[b[1]||(b[1]=D("div",{id:"lineContainer",style:{width:"100%",height:"416px"}},null,-1))]),_:1,__:[1]},8,["title"])]),_:1}),g(T,{xs:12,xl:3},{default:m(()=>[(w(!0),I(R,null,V(v(Ne),(y,L)=>(w(),O(le,{key:L,product:y,class:ie(["product-card",{"row-margin":L!==0}])},null,8,["product","class"]))),128))]),_:1})]),_:1}),g(C,{class:"dashboard-detail-card row-margin",title:v(p)("pages.dashboardDetail.satisfaction.title"),bordered:!1},{actions:m(()=>[g(k,{class:"card-date-picker-container","default-value":v($),theme:"primary",mode:"date",style:{display:"inline-block","margin-right":"var(--td-comp-margin-s)",width:"248px"},onChange:J},null,8,["default-value"]),g(E,{class:"card-date-button"},{default:m(()=>[W(P(v(p)("pages.dashboardDetail.satisfaction.export")),1)]),_:1})]),default:m(()=>[b[2]||(b[2]=D("div",{id:"scatterContainer",style:{width:"100%",height:"434px"}},null,-1))]),_:1,__:[2]},8,["title"])])}}}),qe=ne(We,[["__scopeId","data-v-984552a6"]]);export{qe as default};
